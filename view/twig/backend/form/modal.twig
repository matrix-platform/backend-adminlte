{% extends 'backend/response.twig' %}

{% set formId = random() %}

{% block target %}.modal-wrapper{% endblock %}

{% block html %}
    <div class="modal">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">
                        {{ label(controller.menu.i18n) }}
                        <span class="font-weight-normal h6 ml-2 text-secondary">
                            {{ result.subtitle }}
                        </span>
                    </h3>
                    <button class="close" data-dismiss="modal">
                        <span>&times;</span>
                    </button>
                </div>
                <div class="modal-body" id="_{{ formId }}">
                    {% include 'backend/form/inputs.twig' with {
                        controller,
                        data: result.data,
                        styles: result.styles
                    } only %}
                    <input name="form-type" type="hidden" value="modal">
                </div>
                <div class="justify-content-end modal-footer">
                    {% include 'backend/form/buttons.twig' with {
                        buttons: result.buttons|sort((a, b) => a.ranking <=> b.ranking),
                        data: result.data,
                        formId,
                        path: result.path
                    } only %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block postprocess %}
    var modal = $(".modal-wrapper .modal").modal();

    modal.on("hidden.bs.modal", function () {
        destroyForm(modal);
        modal.remove();
    });

    initForm(modal);
{% endblock %}
